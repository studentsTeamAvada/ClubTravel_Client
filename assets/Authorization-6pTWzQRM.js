import{H as h}from"./header-9Fuft6xP.js";import{j as d}from"./justValidate-34YEjKMs.js";import{P as l}from"./preloader-U3P-yeaR.js";import{a as s,g as m,s as g,G as p,b as c,F as b}from"./firebase-F47n0dmT.js";import{g as z,d as w,c as f,s as A}from"./index.esm2017-HY_ETrW2.js";import{I as F}from"./isAuthorization-ymm8FW1M.js";class k{app;auth;constructor(){this.app=s,this.auth=m()}authorizationWithEmail(){const a=document.querySelector("#authorizationMail"),t=a.value,o=document.querySelector("#authorizationPassword"),e=o.value;g(this.auth,t,e).then(i=>{const n=i.user;window.location.href="index.html",a.value="",o.value="",console.log("User signed in:",n)}).catch(i=>{const n=i.code,u=i.message;alert("Почта или пароль введены неверно"),console.error("Login failed:",n,u)})}authorizationWithGoogle(){const a=new p;c(this.auth,a).then(t=>{const o=t.user,e={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(o.uid,e),console.log("Authorization with Google successful. UID:",o.uid)}).catch(t=>{const o=t.code,e=t.message;alert("Не удалось войти с помощью Google"),console.error("Login failed:",o,e)})}authorizationWithFacebook(){const a=new b;c(this.auth,a).then(t=>{const o=t.user,e={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(o.uid,e),window.location.href="index.html",console.log("Authorization with Facebook successful. UID:",o.uid)}).catch(t=>{const o=t.code,e=t.message;alert("Не удалось войти с помощью Facebook"),console.error("Login failed:",o,e)})}async addUserToFirebase(a,t){const o=z(s),e=w(f(o,"users"),a);await A(e,t).then(()=>{console.log("Document written with UID as documentId:",a)}).catch(i=>{console.error("Error adding document: ",i)})}}document.addEventListener("DOMContentLoaded",()=>{new F,new h,d();const r=new k;document.querySelector(".authorization__btn-registration").addEventListener("click",()=>{r.authorizationWithEmail()}),document.querySelector(".authorization__form-btn-google").addEventListener("click",()=>{r.authorizationWithGoogle()}),document.querySelector(".authorization__form-btn-facebook").addEventListener("click",()=>{r.authorizationWithFacebook()}),new l});
