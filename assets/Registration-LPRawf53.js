import{H as u}from"./header-9Fuft6xP.js";import{b as g}from"./justValidate-34YEjKMs.js";import{a as l}from"./firebase-IcnoC1y6.js";import{g as h,c as m,G as p,a as d,F as b}from"./index-e24386e7-IBhCI8Y3.js";import{g as w,d as f,c as R,s as v}from"./index.esm2017-MrW1TCTu.js";import{P as F}from"./preloader-a9ovPH_o.js";class k{app;auth;constructor(){this.app=l,this.auth=h()}registrationWithEmail(){const s=document.querySelector("#registrationMail"),o=s.value,e=document.querySelector("#registrationPassword"),t=e.value,i=document.querySelector("#registrationRepeatPassword");t===i.value&&m(this.auth,o,t).then(n=>{const r=n.user,c={email:r.email||"",name:"",photo:"",orders:[]};this.addUserToFirebase(r.uid,c),s.value="",e.value="",i.value="",window.location.href="index.html",console.log("Registration with email successful:",r)}).catch(n=>{const r=n.code,c=n.message;console.error("Registration with email failed:",r,c)})}registrationWithGoogle(){const s=new p;d(this.auth,s).then(o=>{const e=o.user,t={email:e.email||"",name:e.displayName||"",photo:e.photoURL||"",orders:[]};this.addUserToFirebase(e.uid,t),console.log("Registration with Google successful:",e)}).catch(o=>{const e=o.code,t=o.message;console.error("Registration with Google failed:",e,t)})}registrationWithFacebook(){const s=new b;d(this.auth,s).then(o=>{const e=o.user,t={email:e.email||"",name:e.displayName||"",photo:e.photoURL||"",orders:[]};this.addUserToFirebase(e.uid,t),window.location.href="index.html",console.log("Registration with Facebook successful:",e)}).catch(o=>{const e=o.code,t=o.message;console.error("Registration with Facebook failed:",e,t)})}async addUserToFirebase(s,o){const e=w(l),t=f(R(e,"users"),s);await v(t,o).then(()=>{console.log("Document written with UID: ",s)}).catch(i=>{console.error("Error adding document: ",i)})}}document.addEventListener("DOMContentLoaded",()=>{new u,g();const a=new k;document.querySelector(".registration__btn-registration").addEventListener("click",()=>{a.registrationWithEmail()}),document.querySelector(".registration__form-btn-google").addEventListener("click",()=>{a.registrationWithGoogle()}),document.querySelector(".registration__form-btn-facebook").addEventListener("click",()=>{a.registrationWithFacebook()}),new F});
