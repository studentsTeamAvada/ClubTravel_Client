import"./jquery-eLIhC4UN.js";import{H as l}from"./header-4uj2AVG8.js";import{j as h}from"./justValidate-34YEjKMs.js";import{P as d}from"./preloader-hw-o7nAZ.js";import{a as n}from"./firebase-IW9Y5CYr.js";import{g as m,s as g,G as p,a as c,F as b}from"./index-e24386e7-jS-Ti_7U.js";import"./index.esm2017-NEpo2ibe.js";import{g as z,a as f,c as w}from"./index.esm2017-rx8I47mm.js";class F{app;auth;constructor(){this.app=n,this.auth=m()}authorizationWithEmail(){const e=document.querySelector("#authorizationMail"),t=e.value,o=document.querySelector("#authorizationPassword"),a=o.value;g(this.auth,t,a).then(i=>{const s=i.user;alert("Пользователь вошел"),e.value="",o.value="",console.log("User signed in:",s)}).catch(i=>{const s=i.code,u=i.message;alert("Почта или пароль введены неверно"),console.error("Login failed:",s,u)})}authorizationWithGoogle(){const e=new p;c(this.auth,e).then(t=>{const o=t.user,a={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(a),console.log("Registration with Google successful:",o)}).catch(t=>{const o=t.code,a=t.message;alert("Не удалось войти с помощью Google"),console.error("Login failed:",o,a)})}authorizationFacebook(){const e=new b;c(this.auth,e).then(t=>{const o=t.user,a={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(a),console.log("Registration with Facebook successful:",o)}).catch(t=>{const o=t.code,a=t.message;alert("Не удалось войти с помощью Facebook"),console.error("Login failed:",o,a)})}addUserToFirebase(e){const t=z(n);f(w(t,"users"),e).then(o=>{console.log(o),console.log("Document written with ID: ",o.id)}).catch(o=>{console.error("Error adding document: ",o)})}}document.addEventListener("DOMContentLoaded",()=>{new l,h();const r=new F;document.querySelector(".authorization__btn-registration").addEventListener("click",()=>{r.authorizationWithEmail()}),document.querySelector(".authorization__form-btn-google").addEventListener("click",()=>{r.authorizationWithGoogle()}),document.querySelector(".authorization__form-btn-facebook").addEventListener("click",()=>{r.authorizationFacebook()}),new d});
