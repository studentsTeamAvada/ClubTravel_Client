import{H as h}from"./header-9Fuft6xP.js";import{j as d}from"./justValidate-34YEjKMs.js";import{P as l}from"./preloader-a9ovPH_o.js";import{a as s}from"./firebase-IcnoC1y6.js";import{g as m,s as g,G as p,a as c,F as z}from"./index-e24386e7-IBhCI8Y3.js";import{g as b,d as w,c as f,s as A}from"./index.esm2017-MrW1TCTu.js";import{I as F}from"./isAuthorization-aZCu2Vv_.js";class k{app;auth;constructor(){this.app=s,this.auth=m()}authorizationWithEmail(){const a=document.querySelector("#authorizationMail"),t=a.value,o=document.querySelector("#authorizationPassword"),e=o.value;g(this.auth,t,e).then(i=>{const n=i.user;window.location.href="index.html",a.value="",o.value="",console.log("User signed in:",n)}).catch(i=>{const n=i.code,u=i.message;alert("Почта или пароль введены неверно"),console.error("Login failed:",n,u)})}authorizationWithGoogle(){const a=new p;c(this.auth,a).then(t=>{const o=t.user,e={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(o.uid,e),console.log("Authorization with Google successful. UID:",o.uid)}).catch(t=>{const o=t.code,e=t.message;alert("Не удалось войти с помощью Google"),console.error("Login failed:",o,e)})}authorizationWithFacebook(){const a=new z;c(this.auth,a).then(t=>{const o=t.user,e={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(o.uid,e),window.location.href="index.html",console.log("Authorization with Facebook successful. UID:",o.uid)}).catch(t=>{const o=t.code,e=t.message;alert("Не удалось войти с помощью Facebook"),console.error("Login failed:",o,e)})}async addUserToFirebase(a,t){const o=b(s),e=w(f(o,"users"),a);await A(e,t).then(()=>{console.log("Document written with UID as documentId:",a)}).catch(i=>{console.error("Error adding document: ",i)})}}document.addEventListener("DOMContentLoaded",()=>{new F,new h,d();const r=new k;document.querySelector(".authorization__btn-registration").addEventListener("click",()=>{r.authorizationWithEmail()}),document.querySelector(".authorization__form-btn-google").addEventListener("click",()=>{r.authorizationWithGoogle()}),document.querySelector(".authorization__form-btn-facebook").addEventListener("click",()=>{r.authorizationWithFacebook()}),new l});
