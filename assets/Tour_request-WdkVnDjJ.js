import{$ as t,a as f,H as p}from"./header-u1vxfMaN.js";import{A as _}from"./air-datepicker-RjqEULTm.js";import{D as v}from"./dropdown-tBtwEz6U.js";import{g as b,f as h,c as m}from"./index.esm2017-WC45BDwc.js";import{v as D,A as g}from"./AsYouType-OJIbSEbD.js";class w{dropDown;dropMain;btn;allAccordions;countryMainDrop;tourMainDrop;constructor(){this.dropDown=t(".drop-country"),this.dropMain=t(".drop-country__accordions"),this.btn=t(".drop-country__btn"),this.allAccordions=t(".accordion"),this.countryMainDrop=t(".drop-country__county"),this.tourMainDrop=t(".drop-country__tour"),this.init()}init(){this.open(),this.observer(),this.accordion()}checkTour(){return this.countryMainDrop.html()==="Страна"?(console.log(1),!1):(console.log(2),!0)}open(){this.btn.on("click",()=>{this.dropDown.toggleClass("drop-country_active")});const o=this;t(document).on("click",function(e){o.dropDown.has(e.target).length==0&&o.dropDown.removeClass("drop-country_active")})}observer(){const o=Number(this.dropMain.height()),e=this;t(document).ready(function(){const n={root:null,rootMargin:`0px 0px -${o+30}px 0px`,threshold:1};function r(c){c.forEach(s=>{const d=Number(t(window).height()),l=Number(s.boundingClientRect.top);d>700&&l>0&&(s.isIntersecting?(e.dropDown.addClass("drop-country_bottom"),e.dropDown.removeClass("drop-country_top")):(e.dropDown.addClass("drop-country_top"),e.dropDown.removeClass("drop-country_bottom")))})}const a=t(".drop-country__btn"),i=new IntersectionObserver(r,n);a.each(function(c,s){i.observe(s)})})}accordion(){const o=this;this.allAccordions.each((r,a)=>{n(a),e(a)});function e(r){const a=r.querySelectorAll("li"),i=String(r.querySelector(".accordion__country")?.textContent);a.forEach(c=>{c.addEventListener("click",()=>{o.countryMainDrop.html(i),o.tourMainDrop.html(String(c.textContent)),o.dropDown.removeClass("drop-country_active"),document.dispatchEvent(new Event("selectTour"))})})}function n(r){document.addEventListener("click",a=>{r.contains(a.target)?r.classList.toggle("accordion_active"):r.classList.remove("accordion_active")})}}}class x{calendar;calendarMain;btn;form;currentSelDate;currentNextDate;datepicker;between;constructor(){this.form=t(".form"),this.calendar=t(".calendar"),this.calendarMain=t(".calendar__main"),this.btn=t(".calendar__btn"),this.currentSelDate=new Date,this.currentNextDate=new Date,this.between=0,this.init()}init(){this.open(),this.observer(),this.airDatepicker(),this.counter()}newDate(o=!0,e=!1){o?(t("#start-date").html(this.formatDate(this.currentSelDate)),document.dispatchEvent(new Event("startDate"))):t("#start-date").html(""),e?(t("#final-date").html(this.formatDate(this.currentNextDate)),document.dispatchEvent(new Event("finalDate"))):t("#final-date").html("")}airDatepicker(){const o=this,e=new Date().setDate(new Date().getFullYear()+5);this.datepicker=new _("#el",{range:!0,toggleSelected:!0,multipleDatesSeparator:" -",minDate:new Date,onSelect({date:n}){const r=n;r[1]?(o.currentNextDate=new Date(r[1]),o.newDate(!0,!0),o.datepicker?.update({minDate:new Date,maxDate:e}),o.selectCount(),o.calendar.removeClass("calendar_active")):r[0]?(o.currentSelDate=new Date(r[0]),o.newDate(),o.datepicker?.update({minDate:new Date(r[0]),maxDate:new Date(r[0]).setDate(r[0].getDate()+18)})):(o.datepicker?.update({minDate:new Date,maxDate:e}),o.newDate(!1,!1))}})}selectCount(){const o=this.currentNextDate.getTime()-this.currentSelDate.getTime(),e=Math.floor(o/(1e3*60*60*24));t(".form__counter-count").html(String(e))}counter(){const o=t(".form__counter-add"),e=t(".form__counter-remove"),n=t(".form__counter-count"),r=this;function a(){let s=+n.text();if(s<18){const d=s+1;c(String(d))}}function i(){let s=+n.text();if(s>1){const d=s-1;c(String(d))}}function c(s){n.html(s),r.selectFinishDate(+s)}o.on("click",a),e.on("click",i)}selectFinishDate(o=1){const e=new Date(this.currentSelDate);e.setDate(this.currentSelDate.getDate()+o),this.datepicker?.clear(),this.datepicker?.selectDate(this.currentSelDate),this.datepicker?.selectDate(e)}formatDate(o){const e=o.getDate(),n=o.getMonth()+1,r=o.getFullYear(),a=e<10?"0"+e:e,i=n<10?"0"+n:n;return`${a}.${i}.${r}`}open(){this.btn.on("click",()=>{this.calendar.toggleClass("calendar_active")});const o=this;t(document).on("click",function(e){o.calendar.has(e.target).length==0&&o.calendar.removeClass("calendar_active")})}observer(){const o=Number(this.calendarMain.height()),e=this;t(document).ready(function(){const n={root:null,rootMargin:`0px 0px -${o+30}px 0px`,threshold:1};function r(c){c.forEach(s=>{const d=Number(t(window).height()),l=Number(s.boundingClientRect.top);d>700&&l>0&&(s.isIntersecting?(e.calendar.addClass("calendar_bottom"),e.calendar.removeClass("calendar_top")):(e.calendar.addClass("calendar_top"),e.calendar.removeClass("calendar_bottom")))})}const a=t(".calendar__btn"),i=new IntersectionObserver(r,n);a.each(function(c,s){i.observe(s)})})}}class y{food;foodMain;btn;allLi;currentSelect;errorFood;constructor(){this.food=t(".food"),this.foodMain=t(".food__list"),this.btn=t(".food__btn"),this.allLi=this.food.find("li"),this.currentSelect=t(".food__btn-info"),this.errorFood=t(".form__error-food"),this.init()}init(){this.open(),this.observer(),this.select()}select(){this.allLi.each((o,e)=>{e.addEventListener("click",()=>{this.currentSelect.html(String(e.textContent)),this.errorFood.removeClass("form__error-food_active"),document.dispatchEvent(new Event("selectFood"))})})}open(){this.food.on("click",()=>{this.food.toggleClass("food_active")});const o=this;t(document).on("click",function(e){o.food.has(e.target).length==0&&o.food.removeClass("food_active")})}observer(){const o=Number(this.foodMain.height()),e=this;t(document).ready(function(){const n={root:null,rootMargin:`0px 0px -${o+30}px 0px`,threshold:1};function r(c){c.forEach(s=>{const d=Number(t(window).height()),l=Number(s.boundingClientRect.top);d>700&&l>0&&(s.isIntersecting?(e.food.addClass("food_bottom"),e.food.removeClass("food_top")):(e.food.addClass("food_top"),e.food.removeClass("food_bottom")))})}const a=t(".food__btn"),i=new IntersectionObserver(r,n);a.each(function(c,s){i.observe(s)})})}}class S{dateObj;constructor(){this.dateObj={country:"",region:"",dataStart:"",dataFinish:"",people:{kids:0,adults:1},price:"",food:"",stars:"",wouldLike:"",name:"",tel:"",email:""},this.init()}init(){this.selectDate()}selectDate(){console.log(this.dateObj,1),document.addEventListener("selectTour",()=>{this.dateObj.country=t(".drop-country__county").html(),this.dateObj.region=t(".drop-country__tour").html()}),document.addEventListener("finalDate",()=>{this.dateObj.dataStart=t("#start-date").html(),this.dateObj.dataFinish=t("#final-date").html()}),document.addEventListener("myCustomEvent",o=>{const e=o;this.dateObj.people=e.detail}),document.addEventListener("selectFood",()=>{this.dateObj.food=t(".food__btn-info").html()}),document.addEventListener("selectStars",o=>{const e=o;this.dateObj.stars=e.detail.stars}),t("#input-price").on("input",()=>{this.dateObj.price=String(t("#input-price").val())}),t(".form__textarea").on("input",()=>{this.dateObj.wouldLike=String(t(".form__textarea").val())}),t("#input-name").on("input",()=>{this.dateObj.name=String(t("#input-name").val())}),t("#input-tel").on("input",()=>{this.dateObj.tel=String(t("#input-tel").val())}),t("#input-mail").on("input",()=>{this.dateObj.email=String(t("#input-mail").val())}),t("#adviser-inp").on("input",()=>{this.dateObj.tel=String(t("#adviser-inp").val())})}async sendDate(o=!0){const e=b(f);o?await h(m(e,"callYouForm"),this.dateObj):await h(m(e,"callYouForm"),{phone:this.dateObj.tel}),this.clearFormTwo()}clearFormTwo(){t("#input-price").val(""),t(".form__textarea").val(""),t(".food__btn-info").html("Выбрать"),t(".form__stars-one-star").each((o,e)=>{e.classList.remove("form__stars-one-star_active")})}}class C{input;inputBtn;tabsBtn;form;tabsSlider;DropPeople;formBtn;stars;inputForm;formInfo;sendDate;constructor(){this.sendDate=new S,this.DropPeople=new v(".form__drop-guests",".form__drop-tags"),this.stars=t(".form__stars-one-star"),this.formInfo={},this.input=t("#adviser-inp"),this.inputBtn=t(".adviser__btn"),this.inputForm=t("#adviser__form"),this.tabsBtn=t(".form__tabs"),this.form=t(".form"),this.formBtn=this.form.find(".form__btn"),this.tabsSlider=t(".form__tabs-slider"),this.validateTel("#adviser__form"),this.tabs(),this.points(),this.stopReload(),this.clickFormBtn(),this.inputMask(),this.selectStars(),this.validateMainFormOne(),this.validateMainFormThree(),this.priceVal()}priceVal(){const o=document.getElementById("input-price");o?.addEventListener("input",()=>{/^[0-9]{0,7}$/.test(o.value)||(o.value=o.value.slice(0,-1))})}selectStars(){const o=this;this.stars.each((n,r)=>{r.addEventListener("click",()=>{e(Number(r.getAttribute("data-num")));const a=new CustomEvent("selectStars",{detail:{stars:r.getAttribute("data-num")}});document.dispatchEvent(a)})});function e(n){o.stars.each((r,a)=>{r<n?a.classList.add("form__stars-one-star_active"):a.classList.remove("form__stars-one-star_active")})}}stopReload(){this.form.on("submit",o=>{o.preventDefault()})}tabs(){const o=document.querySelector(".form__tab-one"),e=document.querySelector(".form__tab-two"),n=document.querySelector(".form__tab-three");this.tabsBtn.each((r,a)=>{a.addEventListener("click",i=>{o?.contains(i.target)?this.points(1):e?.contains(i.target)?this.points(2):n?.contains(i.target)&&this.points(3)})})}points(o=1){const e=document.querySelector(".form__tab-one"),n=document.querySelector(".form__tab-two"),r=document.querySelector(".form__tab-three"),a=!t(".form").is(".form_error");o===1&&a?(r?.classList.remove("form__tab_active"),n?.classList.remove("form__tab_active"),e?.classList.add("form__tab_active"),this.form.removeClass("form_state-two form_state-three"),this.form.addClass("form_state-one"),this.tabsSlider.css({left:"0"})):o===2&&a?(r?.classList.remove("form__tab_active"),e?.classList.remove("form__tab_active"),n?.classList.add("form__tab_active"),this.form.removeClass("form_state-one form_state-three"),this.form.addClass("form_state-two"),this.tabsSlider.css({left:"33.3%"})):o===3&&a&&(e?.classList.remove("form__tab_active"),n?.classList.remove("form__tab_active"),r?.classList.add("form__tab_active"),this.form.removeClass("form_state-one form_state-two"),this.form.addClass("form_state-three"),this.tabsSlider.css({left:"68%"}))}clickFormBtn(){this.formBtn.on("click",()=>{t(".form").is(".form_state-two")&&this.points(3)})}clickBtn(){alert("В скором времени вам позвонят."),this.input.val(""),t(".adviser__input").removeClass("adviser__input_active")}inputMask(){document.querySelectorAll("input[name='phone']").forEach(e=>{const n=e;n.addEventListener("input",()=>{n.value.length===1&&(n.value="+"+n.value,n.value==="+0"&&(n.value="+380")),D(n.value+"0")==="TOO_LONG"&&(n.value=n.value.slice(0,-1)),n.value=new g().input(n.value)})})}validateTel(o){const e=this;t.validator.addMethod("min",function(n){return/\+380/.test(n)?n.replace(/ |\+/g,"").length>=12:n.replace(/ |\+/g,"").length>=10},"Номер должен состоять из 10 цифр"),t(o).validate({rules:{phone:{min:!0,maxlength:16,required:!0}},messages:{phone:{required:"Введите номер",maxlength:"Слишком длинный номер"}},submitHandler(n){t(o).find(".input-row").removeClass("input_active"),e.sendDate.sendDate(!1),alert("Мы скоро с вами свяжемся"),t(n).trigger("reset")}})}validateMainFormOne(){const o=this;document.addEventListener("selectTour",()=>{t("#drop-country").valid()}),document.addEventListener("startDate",()=>{t("#drop-calendar").valid()}),document.addEventListener("finalDate",()=>{t("#drop-calendar").valid()}),t.validator.addMethod("dropCountry",function(){return t(".drop-country__county").html()!=="Страна"},"Выбирите тур"),t.validator.addMethod("departure",function(){return t("#start-date").html().length>0},"Выберите дату вылета"),t.validator.addMethod("arrived",function(){return t("#final-date").html().length>0},"Выберите дату возвращения"),t("#form-state-one").validate({rules:{dropCalendar:{departure:!0,arrived:!0},dropCountry:{dropCountry:!0}},submitHandler(){t(".form").removeClass("form_error"),o.points(2)}})}validateMainFormThree(){const o=this;t.validator.addMethod("laxEmail",function(e){return/^(?!.*\.\.)[\w.-]{3,20}@[\wа-я.][\wа-я.-]{1,20}[\wа-я.]\.[a-z]{2,10}/.test(e)},"Введите корректный email"),t.validator.addMethod("min",function(e){return/\+380/.test(e)?e.replace(/ |\+/g,"").length>=12:e.replace(/ |\+/g,"").length>=10},"Номер должен состоять из 10 цифр"),t.validator.addMethod("onlyLetters",function(e){return/^[a-za-z]*$/i.test(e)},"Введите корректное имя"),t("#form-state-three").validate({rules:{phone:{min:!0,maxlength:16},email:{laxEmail:!0},name:{required:!0,onlyLetters:!0,minlength:3}},messages:{phone:{maxlength:"Слишком длинный номер"},name:{required:"Введите ваше имя",minlength:"Минимум три символа"}},submitHandler(e){alert("Мы скоро с вами свяжемся"),t(e).trigger("reset"),o.sendDate.sendDate(),o.points(1)}})}}document.addEventListener("DOMContentLoaded",()=>{new y,new w,new x,new C,new p});
