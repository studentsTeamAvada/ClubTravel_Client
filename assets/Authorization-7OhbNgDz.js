import{a as s,g as h,s as d,G as l,b as c,F as m,H as g}from"./header-UOznUX4s.js";import{j as p}from"./justValidate-ywqcVI2V.js";import{P as b}from"./preloader-Ol6F-ees.js";import{g as z,d as w,c as f,s as A}from"./index.esm2017-KohIPueg.js";import{I as F}from"./isAuthorization-Mw32a7Qa.js";class k{app;auth;constructor(){this.app=s,this.auth=h()}authorizationWithEmail(){const a=document.querySelector("#authorizationMail"),t=a.value,o=document.querySelector("#authorizationPassword"),e=o.value;d(this.auth,t,e).then(i=>{const n=i.user;window.location.href="index.html",a.value="",o.value="",console.log("User signed in:",n)}).catch(i=>{const n=i.code,u=i.message;alert("Почта или пароль введены неверно"),console.error("Login failed:",n,u)})}authorizationWithGoogle(){const a=new l;c(this.auth,a).then(t=>{const o=t.user,e={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(o.uid,e),console.log("Authorization with Google successful. UID:",o.uid)}).catch(t=>{const o=t.code,e=t.message;alert("Не удалось войти с помощью Google"),console.error("Login failed:",o,e)})}authorizationWithFacebook(){const a=new m;c(this.auth,a).then(t=>{const o=t.user,e={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(o.uid,e),window.location.href="index.html",console.log("Authorization with Facebook successful. UID:",o.uid)}).catch(t=>{const o=t.code,e=t.message;alert("Не удалось войти с помощью Facebook"),console.error("Login failed:",o,e)})}async addUserToFirebase(a,t){const o=z(s),e=w(f(o,"users"),a);await A(e,t).then(()=>{console.log("Document written with UID as documentId:",a)}).catch(i=>{console.error("Error adding document: ",i)})}}document.addEventListener("DOMContentLoaded",()=>{new F,new g,p();const r=new k;document.querySelector(".authorization__btn-registration").addEventListener("click",()=>{r.authorizationWithEmail()}),document.querySelector(".authorization__form-btn-google").addEventListener("click",()=>{r.authorizationWithGoogle()}),document.querySelector(".authorization__form-btn-facebook").addEventListener("click",()=>{r.authorizationWithFacebook()}),new b});
