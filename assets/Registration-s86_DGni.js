import{a as l,g as u,p as g,G as h,b as m,H as p}from"./header-30OnrdDG.js";import{c as w}from"./justValidate-ywqcVI2V.js";import{g as b,d as R,c as f,s as v}from"./index.esm2017-fee6Juqa.js";class E{app;auth;constructor(){this.app=l,this.auth=u()}registrationWithEmail(){const o=document.querySelector("#registrationMail"),t=o.value,e=document.querySelector("#registrationPassword"),r=e.value,s=document.querySelector("#registrationRepeatPassword");r===s.value&&g(this.auth,t,r).then(i=>{const a=i.user,c={email:a.email||"",name:"",photo:"",orders:[]};this.addUserToFirebase(a.uid,c).then(()=>{o.value="",e.value="",s.value="",window.location.href="account.html",console.log("Registration with email successful:",a)}).catch(d=>{console.error("Error adding user to Firebase: ",d)})}).catch(i=>{const a=i.code,c=i.message;console.error("Registration with email failed:",a,c)})}registrationWithGoogle(){const o=new h;m(this.auth,o).then(t=>{const e=t.user,r={email:e.email||"",name:e.displayName||"",photo:e.photoURL||"",orders:[]};this.addUserToFirebase(e.uid,r).then(()=>{window.location.href="account.html",console.log("Registration with Google successful:",e)}).catch(s=>{console.error("Error adding user to Firebase: ",s)})}).catch(t=>{const e=t.code,r=t.message;console.error("Registration with Google failed:",e,r)})}async addUserToFirebase(o,t){const e=b(l),r=R(f(e,"users"),o);await v(r,t).then(()=>{console.log("Document written with UID: ",o)}).catch(s=>{console.error("Error adding document: ",s)})}}document.addEventListener("DOMContentLoaded",()=>{w();const n=new E;document.querySelector(".registration__btn-registration").addEventListener("click",()=>{n.registrationWithEmail()}),document.querySelector(".registration__form-btn-google").addEventListener("click",()=>{n.registrationWithGoogle()}),new p});
