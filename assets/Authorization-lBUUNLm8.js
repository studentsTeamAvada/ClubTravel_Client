import{a as r,g as h,s as d,G as l,b as c,F as m,H as g}from"./header-cE-hf-kH.js";import{j as p}from"./justValidate-ywqcVI2V.js";import{g as b,d as z,c as w,s as f}from"./index.esm2017-zqs_mZGC.js";import{I as A}from"./isAuthorization-NEL9tfNC.js";class F{app;auth;constructor(){this.app=r,this.auth=h()}authorizationWithEmail(){const a=document.querySelector("#authorizationMail"),t=a.value,o=document.querySelector("#authorizationPassword"),e=o.value;d(this.auth,t,e).then(i=>{const s=i.user;window.location.href="index.html",a.value="",o.value="",console.log("User signed in:",s)}).catch(i=>{const s=i.code,u=i.message;alert("Почта или пароль введены неверно"),console.error("Login failed:",s,u)})}authorizationWithGoogle(){const a=new l;c(this.auth,a).then(t=>{const o=t.user,e={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(o.uid,e),console.log("Authorization with Google successful. UID:",o.uid)}).catch(t=>{const o=t.code,e=t.message;alert("Не удалось войти с помощью Google"),console.error("Login failed:",o,e)})}authorizationWithFacebook(){const a=new m;c(this.auth,a).then(t=>{const o=t.user,e={email:o.email||"",name:o.displayName||"",photo:o.photoURL||"",orders:[]};this.addUserToFirebase(o.uid,e),window.location.href="index.html",console.log("Authorization with Facebook successful. UID:",o.uid)}).catch(t=>{const o=t.code,e=t.message;alert("Не удалось войти с помощью Facebook"),console.error("Login failed:",o,e)})}async addUserToFirebase(a,t){const o=b(r),e=z(w(o,"users"),a);await f(e,t).then(()=>{console.log("Document written with UID as documentId:",a)}).catch(i=>{console.error("Error adding document: ",i)})}}document.addEventListener("DOMContentLoaded",()=>{new A,p();const n=new F;document.querySelector(".authorization__btn-registration").addEventListener("click",()=>{n.authorizationWithEmail()}),document.querySelector(".authorization__form-btn-google").addEventListener("click",()=>{n.authorizationWithGoogle()}),document.querySelector(".authorization__form-btn-facebook").addEventListener("click",()=>{n.authorizationWithFacebook()}),new g});
