import{$ as t,a as f,H as p}from"./header-wf8HbVZh.js";import{A as _}from"./air-datepicker-yKkfEXOD.js";import{D as v}from"./dropdown-BbapwhB6.js";import{g as b,f as h,c as m}from"./index.esm2017-CVpEnNBY.js";import{v as D,A as g}from"./AsYouType-WCNi5Su5.js";class w{dropDown;dropMain;btn;allAccordions;countryMainDrop;tourMainDrop;constructor(){this.dropDown=t(".drop-country"),this.dropMain=t(".drop-country__accordions"),this.btn=t(".drop-country__btn"),this.allAccordions=t(".accordion"),this.countryMainDrop=t(".drop-country__county"),this.tourMainDrop=t(".drop-country__tour"),this.init()}init(){this.open(),this.observer(),this.accordion()}checkTour(){return this.countryMainDrop.html()==="Страна"?(console.log(1),!1):(console.log(2),!0)}open(){this.btn.on("click",()=>{this.dropDown.toggleClass("drop-country_active")});const e=this;t(document).on("click",function(o){e.dropDown.has(o.target).length==0&&e.dropDown.removeClass("drop-country_active")})}observer(){const e=Number(this.dropMain.height()),o=this;t(document).ready(function(){const n={root:null,rootMargin:`0px 0px -${e+30}px 0px`,threshold:1};function r(c){c.forEach(s=>{const d=Number(t(window).height()),l=Number(s.boundingClientRect.top);d>700&&l>0&&(s.isIntersecting?(o.dropDown.addClass("drop-country_bottom"),o.dropDown.removeClass("drop-country_top")):(o.dropDown.addClass("drop-country_top"),o.dropDown.removeClass("drop-country_bottom")))})}const a=t(".drop-country__btn"),i=new IntersectionObserver(r,n);a.each(function(c,s){i.observe(s)})})}accordion(){const e=this;this.allAccordions.each((r,a)=>{n(a),o(a)});function o(r){const a=r.querySelectorAll("li"),i=String(r.querySelector(".accordion__country")?.textContent);a.forEach(c=>{c.addEventListener("click",()=>{e.countryMainDrop.html(i),e.tourMainDrop.html(String(c.textContent)),e.dropDown.removeClass("drop-country_active"),document.dispatchEvent(new Event("selectTour"))})})}function n(r){document.addEventListener("click",a=>{r.contains(a.target)?r.classList.toggle("accordion_active"):r.classList.remove("accordion_active")})}}}class x{calendar;calendarMain;btn;form;currentSelDate;currentNextDate;datepicker;between;constructor(){this.form=t(".form"),this.calendar=t(".calendar"),this.calendarMain=t(".calendar__main"),this.btn=t(".calendar__btn"),this.currentSelDate=new Date,this.currentNextDate=new Date,this.between=0,this.init()}init(){this.open(),this.observer(),this.airDatepicker(),this.counter()}newDate(e=!0,o=!1){e?(t("#start-date").html(this.formatDate(this.currentSelDate)),document.dispatchEvent(new Event("startDate"))):t("#start-date").html(""),o?(t("#final-date").html(this.formatDate(this.currentNextDate)),document.dispatchEvent(new Event("finalDate"))):t("#final-date").html("")}airDatepicker(){const e=this,o=new Date().setDate(new Date().getFullYear()+5);this.datepicker=new _("#el",{range:!0,toggleSelected:!0,multipleDatesSeparator:" -",minDate:new Date,onSelect({date:n}){const r=n;r[1]?(e.currentNextDate=new Date(r[1]),e.newDate(!0,!0),e.datepicker?.update({minDate:new Date,maxDate:o}),e.selectCount(),e.calendar.removeClass("calendar_active")):r[0]?(e.currentSelDate=new Date(r[0]),e.newDate(),e.datepicker?.update({minDate:new Date(r[0]),maxDate:new Date(r[0]).setDate(r[0].getDate()+18)})):(e.datepicker?.update({minDate:new Date,maxDate:o}),e.newDate(!1,!1))}})}selectCount(){const e=this.currentNextDate.getTime()-this.currentSelDate.getTime(),o=Math.floor(e/(1e3*60*60*24));t(".form__counter-count").html(String(o))}counter(){const e=t(".form__counter-add"),o=t(".form__counter-remove"),n=t(".form__counter-count"),r=this;function a(){let s=+n.text();if(s<21){const d=s+1;c(String(d))}}function i(){let s=+n.text();if(s>1){const d=s-1;c(String(d))}}function c(s){n.html(s),r.selectFinishDate(+s)}e.on("click",a),o.on("click",i)}selectFinishDate(e=1){const o=new Date(this.currentSelDate);o.setDate(this.currentSelDate.getDate()+e),this.datepicker?.clear(),this.datepicker?.selectDate(this.currentSelDate),this.datepicker?.selectDate(o)}formatDate(e){const o=e.getDate(),n=e.getMonth()+1,r=e.getFullYear(),a=o<10?"0"+o:o,i=n<10?"0"+n:n;return`${a}.${i}.${r}`}open(){this.btn.on("click",()=>{this.calendar.toggleClass("calendar_active")});const e=this;t(document).on("click",function(o){e.calendar.has(o.target).length==0&&e.calendar.removeClass("calendar_active")})}observer(){const e=Number(this.calendarMain.height()),o=this;t(document).ready(function(){const n={root:null,rootMargin:`0px 0px -${e+30}px 0px`,threshold:1};function r(c){c.forEach(s=>{const d=Number(t(window).height()),l=Number(s.boundingClientRect.top);d>700&&l>0&&(s.isIntersecting?(o.calendar.addClass("calendar_bottom"),o.calendar.removeClass("calendar_top")):(o.calendar.addClass("calendar_top"),o.calendar.removeClass("calendar_bottom")))})}const a=t(".calendar__btn"),i=new IntersectionObserver(r,n);a.each(function(c,s){i.observe(s)})})}}class y{food;foodMain;btn;allLi;currentSelect;errorFood;constructor(){this.food=t(".food"),this.foodMain=t(".food__list"),this.btn=t(".food__btn"),this.allLi=this.food.find("li"),this.currentSelect=t(".food__btn-info"),this.errorFood=t(".form__error-food"),this.init()}init(){this.open(),this.observer(),this.select()}select(){this.allLi.each((e,o)=>{o.addEventListener("click",()=>{this.currentSelect.html(String(o.textContent)),this.errorFood.removeClass("form__error-food_active"),document.dispatchEvent(new Event("selectFood"))})})}open(){this.food.on("click",()=>{this.food.toggleClass("food_active")});const e=this;t(document).on("click",function(o){e.food.has(o.target).length==0&&e.food.removeClass("food_active")})}observer(){const e=Number(this.foodMain.height()),o=this;t(document).ready(function(){const n={root:null,rootMargin:`0px 0px -${e+30}px 0px`,threshold:1};function r(c){c.forEach(s=>{const d=Number(t(window).height()),l=Number(s.boundingClientRect.top);d>700&&l>0&&(s.isIntersecting?(o.food.addClass("food_bottom"),o.food.removeClass("food_top")):(o.food.addClass("food_top"),o.food.removeClass("food_bottom")))})}const a=t(".food__btn"),i=new IntersectionObserver(r,n);a.each(function(c,s){i.observe(s)})})}}class S{dateObj;constructor(){this.dateObj={country:"",region:"",dataStart:"",dataFinish:"",people:{kids:0,adults:1},price:"",food:"",stars:"",wouldLike:"",name:"",tel:"",email:""},this.init()}init(){this.selectDate()}selectDate(){console.log(this.dateObj,1),document.addEventListener("selectTour",()=>{this.dateObj.country=t(".drop-country__county").html(),this.dateObj.region=t(".drop-country__tour").html()}),document.addEventListener("finalDate",()=>{this.dateObj.dataStart=t("#start-date").html(),this.dateObj.dataFinish=t("#final-date").html()}),document.addEventListener("myCustomEvent",e=>{const o=e;this.dateObj.people=o.detail}),document.addEventListener("selectFood",()=>{this.dateObj.food=t(".food__btn-info").html()}),document.addEventListener("selectStars",e=>{const o=e;this.dateObj.stars=o.detail.stars}),t("#input-price").on("input",()=>{this.dateObj.price=String(t("#input-price").val())}),t(".form__textarea").on("input",()=>{this.dateObj.wouldLike=String(t(".form__textarea").val())}),t("#input-name").on("input",()=>{this.dateObj.name=String(t("#input-name").val())}),t("#input-tel").on("input",()=>{this.dateObj.tel=String(t("#input-tel").val())}),t("#input-mail").on("input",()=>{this.dateObj.email=String(t("#input-mail").val())}),t("#adviser-inp").on("input",()=>{this.dateObj.tel=String(t("#adviser-inp").val())})}async sendDate(e=!0){const o=b(f);e?await h(m(o,"callYouForm"),this.dateObj):await h(m(o,"callYouForm"),{phone:this.dateObj.tel}),this.clearFormTwo()}clearFormTwo(){t("#input-price").val(""),t(".form__textarea").val(""),t(".food__btn-info").html("Выбрать"),t(".form__stars-one-star").each((e,o)=>{o.classList.remove("form__stars-one-star_active")})}}class C{input;inputBtn;tabsBtn;form;tabsSlider;DropPeople;formBtn;stars;inputForm;formInfo;sendDate;constructor(){this.sendDate=new S,this.DropPeople=new v(".form__drop-guests",".form__drop-tags"),this.stars=t(".form__stars-one-star"),this.formInfo={},this.input=t("#adviser-inp"),this.inputBtn=t(".adviser__btn"),this.inputForm=t("#adviser__form"),this.tabsBtn=t(".form__tabs"),this.form=t(".form"),this.formBtn=this.form.find(".form__btn"),this.tabsSlider=t(".form__tabs-slider"),this.validateTel("#adviser__form"),this.tabs(),this.points(),this.stopReload(),this.clickFormBtn(),this.inputMask(),this.selectStars(),this.validateMainFormOne(),this.validateMainFormThree(),this.priceVal()}priceVal(){const e=document.getElementById("input-price");e?.addEventListener("input",()=>{/^[0-9]{0,7}$/.test(e.value)||(e.value=e.value.slice(0,-1))})}selectStars(){const e=this;this.stars.each((n,r)=>{r.addEventListener("click",()=>{o(Number(r.getAttribute("data-num")));const a=new CustomEvent("selectStars",{detail:{stars:r.getAttribute("data-num")}});document.dispatchEvent(a)})});function o(n){e.stars.each((r,a)=>{r<n?a.classList.add("form__stars-one-star_active"):a.classList.remove("form__stars-one-star_active")})}}stopReload(){this.form.on("submit",e=>{e.preventDefault()})}tabs(){const e=document.querySelector(".form__tab-one"),o=document.querySelector(".form__tab-two"),n=document.querySelector(".form__tab-three");this.tabsBtn.each((r,a)=>{a.addEventListener("click",i=>{e?.contains(i.target)?this.points(1):o?.contains(i.target)?this.points(2):n?.contains(i.target)&&this.points(3)})})}points(e=1){const o=document.querySelector(".form__tab-one"),n=document.querySelector(".form__tab-two"),r=document.querySelector(".form__tab-three"),a=!t(".form").is(".form_error");e===1&&a?(r?.classList.remove("form__tab_active"),n?.classList.remove("form__tab_active"),o?.classList.add("form__tab_active"),this.form.removeClass("form_state-two form_state-three"),this.form.addClass("form_state-one"),this.tabsSlider.css({left:"0"})):e===2&&a?(r?.classList.remove("form__tab_active"),o?.classList.remove("form__tab_active"),n?.classList.add("form__tab_active"),this.form.removeClass("form_state-one form_state-three"),this.form.addClass("form_state-two"),this.tabsSlider.css({left:"33.3%"})):e===3&&a&&(o?.classList.remove("form__tab_active"),n?.classList.remove("form__tab_active"),r?.classList.add("form__tab_active"),this.form.removeClass("form_state-one form_state-two"),this.form.addClass("form_state-three"),this.tabsSlider.css({left:"68%"}))}clickFormBtn(){this.formBtn.on("click",()=>{t(".form").is(".form_state-two")&&this.points(3)})}clickBtn(){alert("В скором времени вам позвонят."),this.input.val(""),t(".adviser__input").removeClass("adviser__input_active")}inputMask(){document.querySelectorAll("input[name='phone']").forEach(o=>{const n=o;n.addEventListener("input",()=>{n.value.length===1&&(n.value="+"+n.value,n.value==="+0"&&(n.value="+380")),D(n.value+"0")==="TOO_LONG"&&(n.value=n.value.slice(0,-1)),n.value=new g().input(n.value)})})}validateTel(e){const o=this;t.validator.addMethod("min",function(n){return/\+380/.test(n)?n.replace(/ |\+/g,"").length>=12:n.replace(/ |\+/g,"").length>=10},"Номер должен состоять из 10 цифр"),t(e).validate({rules:{phone:{min:!0,required:!0}},messages:{phone:{required:"Введите номер"}},submitHandler(n){t(e).find(".input-row").removeClass("input_active"),o.sendDate.sendDate(!1),alert("Мы скоро с вами свяжемся"),t(n).trigger("reset")}})}validateMainFormOne(){const e=this;document.addEventListener("selectTour",()=>{t("#drop-country").valid()}),document.addEventListener("startDate",()=>{t("#drop-calendar").valid()}),document.addEventListener("finalDate",()=>{t("#drop-calendar").valid()}),t.validator.addMethod("dropCountry",function(){return t(".drop-country__county").html()!=="Страна"},"Выбирите тур"),t.validator.addMethod("departure",function(){return t("#start-date").html().length>0},"Выберите дату вылета"),t.validator.addMethod("arrived",function(){return t("#final-date").html().length>0},"Выберите дату возвращения"),t("#form-state-one").validate({rules:{dropCalendar:{departure:!0,arrived:!0},dropCountry:{dropCountry:!0}},submitHandler(){t(".form").removeClass("form_error"),e.points(2)}})}validateMainFormThree(){const e=this;t.validator.addMethod("laxEmail",function(o){return/^(?!.*\.\.)[\w.-]{3,20}@[\wа-я.][\wа-я.-]{1,20}[\wа-я.]\.[a-z]{2,10}/.test(o)},"Введите корректный email"),t.validator.addMethod("min",function(o){return/\+380/.test(o)?o.replace(/ |\+/g,"").length>=12:o.replace(/ |\+/g,"").length>=10},"Номер должен состоять из 10 цифр"),t("#form-state-three").validate({rules:{phone:{min:!0},email:{laxEmail:!0},name:{required:!0,minlength:3}},messages:{name:{required:"Введите ваше имя",minlength:"Минимум три символа"}},submitHandler(o){alert("Мы скоро с вами свяжемся2"),t(o).trigger("reset"),e.sendDate.sendDate(),e.points(1)}})}}document.addEventListener("DOMContentLoaded",()=>{new y,new w,new x,new C,new p});
